<script>
document.getElementById("downloadBtn").addEventListener("click", async () => {
    const { jsPDF } = window.jspdf;

    const resume = document.querySelector(".resume-container");
    const button = document.getElementById("downloadBtn");

    // Hide button during download
    button.style.display = "none";

    const canvas = await html2canvas(resume, {
        scale: 2,
        useCORS: true,
        scrollY: -window.scrollY
    });

    const imgData = canvas.toDataURL("image/png");
    const pdf = new jsPDF("p", "mm", "a4");

    const pdfWidth = pdf.internal.pageSize.getWidth();
    const pdfHeight = pdf.internal.pageSize.getHeight();

    const imgWidth = pdfWidth;
    const imgHeight = (canvas.height * imgWidth) / canvas.width;

    let heightLeft = imgHeight;
    let position = 0;

    // First page
    pdf.addImage(imgData, "PNG", 0, position, imgWidth, imgHeight);
    heightLeft -= pdfHeight;

    // Additional pages if needed
    while (heightLeft > 0) {
        position = heightLeft - imgHeight;
        pdf.addPage();
        pdf.addImage(imgData, "PNG", 0, position, imgWidth, imgHeight);
        heightLeft -= pdfHeight;
    }

    pdf.save("Snooky_Delos_Reyes_Resume.pdf");

    // Show button again
    button.style.display = "block";
});
</script>
